"use strict";var Photo=Backbone.Model.extend({idAttribute:"_id"}),PhotoCollection=Backbone.Collection.extend({model:Photo,url:"http://tiny-pizza-server.herokuapp.com/collections/jdphotos"}),ThumbnailView=Backbone.View.extend({template:_.template($(".thumbnail-view-template").text()),className:"thumb",events:{click:"showDetailView"},initialize:function(){this.listenTo(this.model,"change",this.render),$(".thumbnail-gallery").append(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},showDetailView:function(){new DetailView({model:this.model})}}),DetailView=Backbone.View.extend({template:_.template($(".detail-view-template").text()),editingTemplate:_.template($(".detail-view-editing-template").text()),events:{"click .preview-button":"previewChanges","click .save-button":"saveChanges","click .delete-button":"deletePicture","click .new-button":"newPicture"},initialize:function(){this.photoGallery=new PhotoCollection,this.listenTo(this.model,"change",this.render),this.listenTo(this.photoGallery,"add",function(a){new ThumbnailView({model:a})}),$(".details").html(""),$(".details").append(this.el),this.render()},render:function(){console.log("rendered");var a=this.template(this.model.attributes);this.$el.html(a)},previewChanges:function(){var a=$(".link-address input").val();this.$el.find(".zoomed-thumbnail").html("<img src="+a+">")},saveChanges:function(){var a=$(".link-address input").val(),b=$(".caption-quote input").val();a&&b&&(this.model.set({url:a,caption:b}),this.photoGallery.add(this.model),this.model.save())},newPicture:function(){var a=this.editingTemplate(this.model.attributes);this.$el.html(a),this.model=new Photo,this.$el.find("input").val(""),this.$el.find(".zoomed-thumbnail").html("<img src=http://allaboutuarts.ca/wp-content/uploads/2012/07/placeholder.jpg>")},deletePicture:function(){this.model.destroy()}}),AppView=Backbone.View.extend({initialize:function(){this.photoGallery=new PhotoCollection,this.photoGallery.fetch(),this.listenTo(this.photoGallery,"add",function(a){new ThumbnailView({model:a})}),this.listenTo(this.photoGallery,"remove",function(){}),new DetailView({model:this.model})}}),blankPhoto=new Photo({url:"",caption:""});new AppView({model:blankPhoto});