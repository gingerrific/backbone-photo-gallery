"use strict";PhotoGallery.Models.Photo=Backbone.Model.extend({idAttribute:"_id"}),PhotoGallery.Collections.PhotoCollection=Backbone.Collection.extend({model:PhotoGallery.Models.Photo,url:"http://tiny-pizza-server.herokuapp.com/collections/jdphotos"}),PhotoGallery.Views.ThumbnailView=Backbone.View.extend({template:_.template($(".thumbnail-view-template").text()),className:"thumb",events:{click:"showDetailView"},initialize:function(){this.listenTo(this.model,"change",this.render),$(".thumbnail-gallery").append(this.el),this.listenTo(this.model,"destroy",this.remove),this.render()},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},showDetailView:function(){PhotoGallery.views.details=new PhotoGallery.Views.DetailView({model:this.model})}}),PhotoGallery.Views.DetailView=Backbone.View.extend({template:_.template($(".detail-view-template").text()),editingTemplate:_.template($(".detail-view-editing-template").text()),events:{"click .preview-button":"previewChanges","click .save-button":"saveChanges","click .delete-button":"deletePicture","click .new-button":"newPicture"},initialize:function(){this.listenTo(this.model,"change",this.render),$(".details").html(""),$(".details").append(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},previewChanges:function(){var a=$(".link-address input").val();this.$el.find(".zoomed-thumbnail").html("<img src="+a+">")},saveChanges:function(){var a=$(".link-address input").val(),b=$(".caption-quote input").val();a&&b?(this.model.set({url:a,caption:b}),PhotoGallery.collections.photoGallery.add(this.model),this.model.save()):alert("A URL and caption are required.")},newPicture:function(){var a=this.editingTemplate(this.model.attributes);this.$el.html(a),this.model=new PhotoGallery.Models.Photo,this.$el.find("input").val(""),this.$el.find(".zoomed-thumbnail").html("<img src=http://allaboutuarts.ca/wp-content/uploads/2012/07/placeholder.jpg>")},deletePicture:function(){this.model.destroy(),this.newPicture()}}),PhotoGallery.Views.AppView=Backbone.View.extend({initialize:function(){PhotoGallery.collections.photoGallery=new PhotoGallery.Collections.PhotoCollection,PhotoGallery.collections.photoGallery.fetch(),this.listenTo(PhotoGallery.collections.photoGallery,"add",function(a){PhotoGallery.views.thumbnail=new PhotoGallery.Views.ThumbnailView({model:a}),PhotoGallery.views.details=new PhotoGallery.Views.DetailView({model:a})})}}),PhotoGallery.models.blankPhoto=new PhotoGallery.Models.Photo({url:"",caption:""}),PhotoGallery.views.appView=new PhotoGallery.Views.AppView({model:PhotoGallery.models.blankPhoto});